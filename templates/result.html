{% extends "base.html" %}

{% block content %}
{% if prediction %}
<div class="ui centered grid">
  <div class=" ui eight wide column">
    <div class="ui segment">
      <h2 class="ui header">Diabetic Retinopathy Prediction Results</h2>
        
      <table class="ui celled table">
        <thead>
          <tr>
            <th>Model</th>
            <th>Diagnosis</th>
            <th>Confidence</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Inception</td>
            <td>{{ category_inception }}</td>
            <td>{{ probability_inception }}%</td>
          </tr>
          <tr>
            <td>Xception</td>
            <td>{{ category_xception }}</td>
            <td>{{ probability_xception }}%</td>
          </tr>
          <tr>
            <td>Ensemble</td>
            <td>{{ category }}</td>
            <td>{{ probability }}%</td>
          </tr>
        </tbody>
      </table>
      <img src="{{ superimposed_img_path }}" class="bordered-image" style="max-width:100%; height:auto;">
      <a href="/submit" class="ui yellow button">Analyze Another Retinal Photo</a>
    </div>
  </div>
</div>
{% endif %}

{% if not prediction %}
<div class="ui centered grid">
  <div class=" ui eight wide column">
    <div class="ui segment">
      <h2 class="ui header">Diabetic Retinopathy Prediction Results</h2>
      <p>No prediction available, please upload an image.</p>
      <form class="ui form" method="POST" enctype="multipart/form-data" action="/predict" id="image-form">
        <div class="field">
          <label>Retinal Image</label>
          <input type="file" name="image" onchange="previewImage(event)">
        </div>
        <button class="ui yellow button" type="submit" id="submit-button">Analyze Image</button>
      </form>
      <div class="ui segment preview-image" style="display: none;">
        <h4 class="ui header">Preview Image</h4>
        <img id="image-preview" src="" alt="Preview Image">
      </div>
    </div>
  </div>
</div>
{% endif %}
<style>
  h3, th, td {
    color: black !important;
  }
  .ui.yellow.button {
    margin-top: 20px; 
  }
  .bordered-image {
    border: 1.5px solid rgb(0, 0, 0);
    width: 60%;
    height: auto;
  }
</style>
{% endblock %}
